<!DOCTYPE html>

<html lang="en">

<head>

  <meta charset="UTF-8" />

  <title>AI Pronunciation Checker</title>

  <style>

    body {

      font-family: Arial, sans-serif;

      background: #f4f6fb;

      padding: 40px;

    }

    .box {

      max-width: 600px;

      margin: auto;

      background: white;

      padding: 25px;

      border-radius: 12px;

      box-shadow: 0 4px 10px rgba(0,0,0,0.1);

    }

    button {

      padding: 10px 16px;

      margin: 5px 0;

      border-radius: 6px;

      border: none;

      cursor: pointer;

      font-size: 15px;

    }

    #recordBtn { background: #4caf50; color: white; }

    #stopBtn { background: #f44336; color: white; }

    #analyzeBtn { background: #2196f3; color: white; }

    textarea {

      width: 100%;

      height: 80px;

      margin-top: 10px;

      padding: 8px;

    }

    .result {

      margin-top: 15px;

      background: #eef2ff;

      padding: 12px;

      border-radius: 8px;

    }

  </style>

</head>

<body>



<div class="box">

  <h2>?? AI Pronunciation Checker</h2>



  <button id="recordBtn">Start Recording</button><br>

  <button id="stopBtn" disabled>Stop Recording</button>



  <p><b>Transcript:</b></p>

  <textarea id="transcript" placeholder="Your speech will appear here..."></textarea>



  <button id="analyzeBtn">Analyze with AI</button>



  <div class="result" id="aiResult"></div>

</div>



<script>

let recognition;

let finalTranscript = "";



if ('webkitSpeechRecognition' in window) {

  recognition = new webkitSpeechRecognition();

  recognition.lang = "en-US";

  recognition.continuous = false;

  recognition.interimResults = false;



  recognition.onresult = (event) => {

    finalTranscript = event.results[0][0].transcript;

    document.getElementById("transcript").value = finalTranscript;

  };



  recognition.onerror = (e) => {

    alert("Speech recognition error");

    console.error(e);

  };

} else {

  alert("Your browser does not support Speech Recognition");

}



document.getElementById("recordBtn").onclick = () => {

  finalTranscript = "";

  recognition.start();

  document.getElementById("stopBtn").disabled = false;

};



document.getElementById("stopBtn").onclick = () => {

  recognition.stop();

  document.getElementById("stopBtn").disabled = true;

};



document.getElementById("analyzeBtn").onclick = async () => {

  const text = document.getElementById("transcript").value;

  if (!text) {

    alert("Please record your voice first.");

    return;

  }



  document.getElementById("aiResult").innerText = "? Analyzing with AI...";



  try {

    const response = await fetch("https://weathered-poetry-d2e2.sahiranur029.workers.dev/analyze", {

      method: "POST",

      headers: { "Content-Type": "application/json" },

      body: JSON.stringify({ text })

    });



    const data = await response.json();

    document.getElementById("aiResult").innerText = data.feedback || "No response from AI";



  } catch (err) {

    document.getElementById("aiResult").innerText = "? Error connecting to AI";

    console.error(err);

  }

};

</script>



</body>

</html>


